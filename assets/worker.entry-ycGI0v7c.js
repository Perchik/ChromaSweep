(function(){"use strict";const f=new Map;function d(l,e){let n=!1;const{rows:a,cols:g}=l.meta,u=l.meta.rules.map(s=>f.get(s)).filter(s=>!!s);for(let s=0;s<a;s++)for(let o=0;o<g;o++)for(const t of u)t.propagate(e,s,o)&&(n=!0);return n}function m(l,e){const n=l.meta;return{meta:n,getColor:(o,t)=>{var r,i,c;return((c=(i=(r=e.grid)==null?void 0:r[o])==null?void 0:i[t])==null?void 0:c.color)??null},setCertainColor:(o,t,r)=>{e.grid[o][t]={...e.grid[o][t]||{},color:r,solved:!0}},eliminateColor:(o,t,r)=>{const i=e.grid[o][t]||{},c={...i.marks||{}};c[r]!=="E"&&(c[r]="X"),e.grid[o][t]={...i,marks:c}},inBounds:(o,t)=>o>=0&&t>=0&&o<n.rows&&t<n.cols}}self.onmessage=l=>{const{board:e,state:n}=l.data,a=m(e,n),g=d(e,a);self.postMessage({changed:g,state:n})}})();
